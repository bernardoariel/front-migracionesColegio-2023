"use strict";(self.webpackChunkportalColegio=self.webpackChunkportalColegio||[]).push([[317],{7317:(M,A,a)=>{a.r(A),a.d(A,{AutorizanteModule:()=>x});var o=a(6895),p=a(9299),g=a(9246),t=a(1209),d=a(4650);const C=[{path:"",children:[{path:"listado",component:g.E,pathMatch:"full"},{path:"agregar",component:t.U,pathMatch:"full"},{path:"editar/:id",component:t.U,pathMatch:"full"}]}];let _=(()=>{class f{}return f.\u0275fac=function(v){return new(v||f)},f.\u0275mod=d.oAB({type:f}),f.\u0275inj=d.cJS({imports:[p.Bz.forChild(C),p.Bz]}),f})();var U=a(710),T=a(4006),I=a(5503);let x=(()=>{class f{}return f.\u0275fac=function(v){return new(v||f)},f.\u0275mod=d.oAB({type:f}),f.\u0275inj=d.cJS({imports:[o.ez,_,U.h,T.UX,I.D]}),f})()},1209:(M,A,a)=>{a.d(A,{U:()=>u});var o=a(4006),p=a(5412),g=a(727),t=a(4650),d=a(4859);let C=(()=>{class i{constructor(e,s){this.data=e,this.dialogRef=s,this.bsqMenorEdad=0,this.bsqMenorEdad=this.data.bsqMenorEdad}ngOnInit(){}guardar(){this.dialogRef.close(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.WI),t.Y36(p.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-confirm"]],decls:8,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","",1,"justify-content-end"],["mat-flat-button","","mat-dialog-close",""]],template:function(e,s){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"p"),t._uU(4),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t._uU(7,"Ok, Gracias!"),t.qZA()()),2&e&&(t.xp6(1),t.Oqu(s.data.titulo),t.xp6(3),t.Oqu(s.data.mensaje))},dependencies:[d.lW,p.ZT,p.uh,p.xY,p.H8]}),i})();var _=a(8385),U=a(9799),T=a(111),I=a(5618),x=a(1754),f=a(9299),Z=a(5201),v=a(5291),L=a(5210),b=a(6895),N=a(9549),y=a(4144),O=a(4385),Y=a(3238),z=a(9602),F=a(5583);const Q=["apellidoInput"];function J(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function S(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function q(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function k(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function P(i,r){if(1&i&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function R(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function $(i,r){if(1&i&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.descripcion," ")}}function B(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function j(i,r){if(1&i&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.descripcion," ")}}function w(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function K(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function W(i,r){if(1&i&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.descripcion," ")}}function V(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function G(i,r){if(1&i&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.descripcion," ")}}function H(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function X(i,r){if(1&i&&(t.TgZ(0,"div",30)(1,"div",22)(2,"mat-form-field",6)(3,"mat-label"),t._uU(4,"Caracter Autorizante"),t.qZA(),t.TgZ(5,"mat-select",13),t.YNc(6,W,2,2,"mat-option",14),t.qZA(),t.YNc(7,V,3,4,"mat-error",9),t.ALo(8,"keyvalue"),t.qZA()(),t.TgZ(9,"div",22)(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Acreditar Vinculo "),t.qZA(),t.TgZ(13,"mat-select",13),t.YNc(14,G,2,2,"mat-option",14),t.qZA(),t.YNc(15,H,3,4,"mat-error",9),t.ALo(16,"keyvalue"),t.qZA()()()),2&i){const e=t.oxw();t.xp6(5),t.Q6J("formControl",e.caracterAutorizanteControl),t.xp6(1),t.Q6J("ngForOf",e.caracterAutorizantes),t.xp6(1),t.Q6J("ngForOf",t.lcZ(8,6,e.caracterAutorizanteControl.errors)),t.xp6(6),t.Q6J("formControl",e.acreditacionVinculoControl),t.xp6(1),t.Q6J("ngForOf",e.acreditacionVinculos),t.xp6(1),t.Q6J("ngForOf",t.lcZ(16,8,e.acreditacionVinculoControl.errors))}}function tt(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function ot(i,r){1&i&&t._UZ(0,"mat-error")}function et(i,r){if(1&i&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.descripcion," ")}}function it(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function nt(i,r){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessages"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"texto")," ")}}function n(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const m=t.oxw();return t.KtG(m.guardar())}),t._uU(1," Guardar "),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.personaForm.invalid)}}function c(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const m=t.oxw();return t.KtG(m.guardar())}),t._uU(1," Seleccionar "),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.personaForm.invalid)}}const l=function(i){return{"mat-form-field-invalid":i}};let u=(()=>{class i{constructor(e,s,m,h,E,at,rt,st,lt,ct,mt,D){this.nacionalidadesService=e,this.tipoDocumentoService=s,this.emisorDocumentosService=m,this.sexoService=h,this.personasService=E,this.matDialog=at,this.routes=rt,this.caracterAutorizanteService=st,this.acreditacionVinculoService=lt,this.solicitudService=ct,this.dialogRef=mt,this.data=D,this.subscriptions=new g.w0,this.titulo=" un Autorizante",this.rutaActual="",this.idPersona=null,this.modal={},this.persona={apellido:"",segundo_apellido:null,nombre:"",otros_nombres:null,nationality_id:11,type_document_id:4,issuer_document_id:13,numero_de_documento:"",fecha_de_nacimiento:"",sex_id:null,domicilio:"",authorizing_relatives_id:1,accreditation_links_id:1},this.nacionalidades=[],this.tipoDocumentos=[],this.emisorDocumentos=[],this.sexo=[],this.caracterAutorizantes=[],this.acreditacionVinculos=[],this.apellidoControl=new o.NI("",[o.kI.required,o.kI.minLength(3),o.kI.maxLength(40),o.kI.pattern(/^[^0-9]+$/)]),this.segundoApellidoControl=new o.NI("",[o.kI.pattern(/^[^0-9]+$/)]),this.nombreControl=new o.NI("",[o.kI.required,o.kI.minLength(3),o.kI.maxLength(40),o.kI.pattern(/^[^0-9]+$/)]),this.otrosNombresControl=new o.NI("",[o.kI.pattern(/^[^0-9]+$/)]),this.nacionalidadControl=new o.NI(11,[o.kI.required]),this.documentosControl=new o.NI(4,[o.kI.required]),this.emisorControl=new o.NI(13,[o.kI.required]),this.numeroDocumentoControl=new o.NI(null,[o.kI.required,o.kI.minLength(3),o.kI.maxLength(40)]),this.fechaNacimientoControl=new o.NI("",[this.fechaNacimientoValidator()]),this.sexoControl=new o.NI(null,[o.kI.required]),this.domicilioControl=new o.NI("",[o.kI.required,o.kI.minLength(3),o.kI.maxLength(200)]),this.caracterAutorizanteControl=new o.NI(13,[o.kI.required]),this.acreditacionVinculoControl=new o.NI(13,[o.kI.required]),this.personaForm=new o.cw({apellido:this.apellidoControl,segundoApellido:this.segundoApellidoControl,nombre:this.nombreControl,otrosNombres:this.otrosNombresControl,nacionalidad:this.nacionalidadControl,tipoDocumento:this.documentosControl,emisorDocumento:this.emisorControl,numeroDocumento:this.numeroDocumentoControl,fechaNacimiento:this.fechaNacimientoControl,sexo:this.sexoControl,domicilio:this.domicilioControl,caracterAutorizante:this.caracterAutorizanteControl,acreditacionVinculo:this.acreditacionVinculoControl}),D?.persona&&(this.persona=D.persona,this.personaForm.setValue({apellido:this.persona.apellido,segundoApellido:this.persona.segundo_apellido??"",nombre:this.persona.nombre??"",otrosNombres:this.persona.otros_nombres??"",nacionalidad:this.persona.nationality_id??null,tipoDocumento:this.persona.type_document_id??null,emisorDocumento:this.persona.issuer_document_id??null,numeroDocumento:Number(this.persona.numero_de_documento)??null,fechaNacimiento:this.persona.fecha_de_nacimiento??"",sexo:Number(this.persona.sex_id??null),domicilio:this.persona.domicilio??"",caracterAutorizante:Number(this.persona.authorizing_relatives_id)||null,acreditacionVinculo:Number(this.persona.accreditation_links_id)||null})),D?.modal&&(this.modal=D.modal,console.log("persoa::: ",D.modal))}fechaNacimientoValidator(){return e=>{const s=e.value,m=new Date;return s>new Date(m.getFullYear()-21,m.getMonth(),m.getDate())?{mayorEdad:!0}:null}}ngAfterViewInit(){setTimeout(()=>{this.apellidoInput?.nativeElement&&(this.apellidoInput.nativeElement.focus(),this.apellidoInput.nativeElement.select())})}ngOnInit(){this.subscriptions.add(this.nacionalidadesService.getNacionalidades().subscribe(e=>{this.nacionalidades=e})),this.subscriptions.add(this.tipoDocumentoService.getTipoDocumentos().subscribe(e=>{this.tipoDocumentos=e})),this.subscriptions.add(this.emisorDocumentosService.getTipoDocumentos().subscribe(e=>{this.emisorDocumentos=e})),this.subscriptions.add(this.sexoService.getSexo().subscribe(e=>{this.sexo=e})),this.subscriptions.add(this.caracterAutorizanteService.getCaracterAutorizantes().subscribe(e=>{this.caracterAutorizantes=e})),this.subscriptions.add(this.acreditacionVinculoService.getAcreditarVinculos().subscribe(e=>{this.acreditacionVinculos=e}))}ngOnDestroy(){this.subscriptions.unsubscribe()}guardar(){if(!this.personaForm.valid)return;let e=this.personaForm.value.fechaNacimiento,s=null;e&&(s=new Date(e),e=s.toISOString().substring(0,10));let m={apellido:this.personaForm.value.apellido??"",segundo_apellido:this.personaForm.value.segundoApellido,nombre:this.personaForm.value.nombre??"",otros_nombres:this.personaForm.value.otrosNombres,nationality_id:this.personaForm.value.nacionalidad,type_document_id:this.personaForm.value.tipoDocumento,issuer_document_id:this.personaForm.value.emisorDocumento,numero_de_documento:this.personaForm.value.numeroDocumento??"",fecha_de_nacimiento:e,sex_id:this.personaForm.value.sexo??"",domicilio:this.personaForm.value.domicilio??"",authorizing_relatives_id:Number(this.personaForm.value.caracterAutorizante),accreditation_links_id:Number(this.personaForm.value.acreditacionVinculo)};"autorizante"==this.modal.tipoDialogo&&"agregar"==this.modal.accionModal&&this.subscriptions.add(this.personasService.agregarPersona(m).subscribe(h=>{this.dialogRef?.close(),this.matDialog.open(C,{data:{titulo:"Autorizante registrado",message:"Autorizante registrado correctamente"}})})),"autorizante"==this.modal.tipoDialogo&&"editar"==this.modal.accionModal&&(m={...m,id:this.data?.persona?.id},this.subscriptions.add(this.personasService.updatePersona(m).subscribe(h=>{this.dialogRef?.close(),this.matDialog.open(C,{data:{titulo:"Autorizante registrado",message:"Autorizante registrado correctamente"}})}))),"solicitud"==this.modal.tipoDialogo&&"agregar"==this.modal.accionModal&&this.subscriptions.add(this.personasService.agregarPersona(m).subscribe(h=>{this.dialogRef?.close({persona:h}),this.dialogRef?.close(),1==this.modal.persona?this.solicitudService.agregarAutorizante1(h):this.solicitudService.agregarAutorizante2(h)})),"solicitud"==this.modal.tipoDialogo&&"editar"==this.modal.accionModal&&(m={...m,id:this.data?.persona?.id},this.subscriptions.add(this.personasService.updatePersona(m).subscribe(h=>{1==this.modal.persona?this.solicitudService.agregarAutorizante1(m):this.solicitudService.agregarAutorizante2(m),this.dialogRef?.close({persona:m})})))}validarNumero(e){const s=/^[0-9]$/.test(e.key),m="Backspace"===e.key||"Delete"===e.key,h="Tab"===e.key,E=/^Arrow/.test(e.key);!s&&!m&&!h&&!E&&(!e.ctrlKey&&!e.metaKey||"c"!==e.key)&&(!e.ctrlKey&&!e.metaKey||"v"!==e.key)&&"Home"!==e.key&&"End"!==e.key&&e.preventDefault()}buscarPersonaExistente(){this.personasService.getPersonaByDocumento(this.personaForm.controls.numeroDocumento.value).subscribe(e=>{e&&e.id&&this.persona.numero_de_documento!=this.numeroDocumentoControl.value&&this.numeroDocumentoControl.setErrors({dniRepetido:!0})})}cancelar(){this.dialogRef?this.dialogRef.close():this.routes.navigate(["autorizantes","listado"])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.R),t.Y36(U.d),t.Y36(T.V),t.Y36(I.E),t.Y36(x.F),t.Y36(p.uw),t.Y36(f.F0),t.Y36(Z.j),t.Y36(v.j),t.Y36(L.o),t.Y36(p.so),t.Y36(p.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-autorizante"]],viewQuery:function(e,s){if(1&e&&t.Gf(Q,5),2&e){let m;t.iGM(m=t.CRH())&&(s.apellidoInput=m.first)}},decls:104,vars:59,consts:[[1,"my-dialog-container"],[1,"mt-2"],["autocomplete","off",3,"formGroup"],["menorForm",""],[1,"row","mt-3","mb-3"],[1,"col-md-3"],["appearance","fill",1,"w-100"],["type","text","matInput","","placeholder","Ingrese el Apellido",3,"formControl"],["apellidoInput",""],[4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Ingrese el Segundo Apellido",3,"formControl"],["type","text","matInput","","required","","placeholder","Ingrese el Nombre",3,"formControl"],["type","text","id","otros_nombres","matInput","","placeholder","Ingrese Otros Nombres",3,"formControl"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["matNumberInput","","matInput","",3,"formControl","blur","keydown"],["class","row",4,"ngIf"],["appearance","fill",1,"w-100",3,"ngClass"],["matInput","","readonly","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["dp",""],[4,"ngIf"],[1,"col-md-6"],["matInput","","cols","50","rows","1","placeholder","","placeholder","Ingrese el domicilio","required","",3,"formControl"],[1,"row","mt-5"],[1,"col"],["mat-flat-button","","color","secondary",1,"float-start",3,"click"],["class","float-end","mat-flat-button","","color","warn",3,"disabled","click",4,"ngIf"],["class","float-end","mat-flat-button","","color","accent",3,"disabled","click",4,"ngIf"],[3,"value"],[1,"row"],["mat-flat-button","","color","warn",1,"float-end",3,"disabled","click"],["mat-flat-button","","color","accent",1,"float-end",3,"disabled","click"]],template:function(e,s){if(1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"form",2,3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"Apellido"),t.qZA(),t._UZ(11,"input",7,8),t.YNc(13,J,3,4,"mat-error",9),t.ALo(14,"keyvalue"),t.qZA()(),t.TgZ(15,"div",5)(16,"mat-form-field",6)(17,"mat-label"),t._uU(18,"Segundo Apellido"),t.qZA(),t._UZ(19,"input",10),t.YNc(20,S,3,4,"mat-error",9),t.ALo(21,"keyvalue"),t.qZA()(),t.TgZ(22,"div",5)(23,"mat-form-field",6)(24,"mat-label"),t._uU(25,"Nombre"),t.qZA(),t._UZ(26,"input",11),t.YNc(27,q,3,4,"mat-error",9),t.ALo(28,"keyvalue"),t.qZA()(),t.TgZ(29,"div",5)(30,"mat-form-field",6)(31,"mat-label"),t._uU(32,"Otros Nombres"),t.qZA(),t._UZ(33,"input",12),t.YNc(34,k,3,4,"mat-error",9),t.ALo(35,"keyvalue"),t.qZA()()(),t.TgZ(36,"div",4)(37,"div",5)(38,"mat-form-field",6)(39,"mat-label"),t._uU(40,"Nacionalidad"),t.qZA(),t.TgZ(41,"mat-select",13),t.YNc(42,P,2,2,"mat-option",14),t.qZA(),t.YNc(43,R,3,4,"mat-error",9),t.ALo(44,"keyvalue"),t.qZA()(),t.TgZ(45,"div",5)(46,"mat-form-field",6)(47,"mat-label"),t._uU(48,"Tipo de Documento"),t.qZA(),t.TgZ(49,"mat-select",13),t.YNc(50,$,2,2,"mat-option",14),t.qZA(),t.YNc(51,B,3,4,"mat-error",9),t.ALo(52,"keyvalue"),t.qZA()(),t.TgZ(53,"div",5)(54,"mat-form-field",6)(55,"mat-label"),t._uU(56,"Emisor de Documento"),t.qZA(),t.TgZ(57,"mat-select",13),t.YNc(58,j,2,2,"mat-option",14),t.qZA(),t.YNc(59,w,3,4,"mat-error",9),t.ALo(60,"keyvalue"),t.qZA()(),t.TgZ(61,"div",5)(62,"mat-form-field",6)(63,"mat-label"),t._uU(64,"Numero de Documento"),t.qZA(),t.TgZ(65,"input",15),t.NdJ("blur",function(){return s.buscarPersonaExistente()})("keydown",function(h){return s.validarNumero(h)}),t.qZA(),t.YNc(66,K,3,4,"mat-error",9),t.ALo(67,"keyvalue"),t.qZA()()(),t.YNc(68,X,17,10,"div",16),t.TgZ(69,"div",4)(70,"div",5)(71,"mat-form-field",17)(72,"mat-label"),t._uU(73,"Fecha de Nacimiento"),t.qZA(),t._UZ(74,"input",18)(75,"mat-datepicker-toggle",19)(76,"mat-datepicker",null,20),t.YNc(78,tt,3,4,"mat-error",9),t.ALo(79,"keyvalue"),t.YNc(80,ot,1,0,"mat-error",21),t.qZA()(),t.TgZ(81,"div",5)(82,"mat-form-field",6)(83,"mat-label"),t._uU(84,"Sexo"),t.qZA(),t.TgZ(85,"mat-select",13),t.YNc(86,et,2,2,"mat-option",14),t.qZA(),t.YNc(87,it,3,4,"mat-error",9),t.ALo(88,"keyvalue"),t.qZA()(),t.TgZ(89,"div",22)(90,"mat-form-field",6)(91,"mat-label"),t._uU(92,"Domicilio"),t.qZA(),t.TgZ(93,"textarea",23),t._uU(94,"          "),t.qZA(),t.YNc(95,nt,3,4,"mat-error",9),t.ALo(96,"keyvalue"),t.qZA()()(),t.TgZ(97,"div",24)(98,"div",25)(99,"button",26),t.NdJ("click",function(){return s.cancelar()}),t._uU(100," Cancelar "),t.qZA()(),t.TgZ(101,"div",25),t.YNc(102,n,2,1,"button",27),t.YNc(103,c,2,1,"button",28),t.qZA()()()()),2&e){const m=t.MAs(77);t.xp6(2),t.hij("Agregando ",s.titulo,""),t.xp6(2),t.Q6J("formGroup",s.personaForm),t.xp6(7),t.Q6J("formControl",s.apellidoControl),t.xp6(2),t.Q6J("ngForOf",t.lcZ(14,35,s.apellidoControl.errors)),t.xp6(6),t.Q6J("formControl",s.segundoApellidoControl),t.xp6(1),t.Q6J("ngForOf",t.lcZ(21,37,s.segundoApellidoControl.errors)),t.xp6(6),t.Q6J("formControl",s.nombreControl),t.xp6(1),t.Q6J("ngForOf",t.lcZ(28,39,s.nombreControl.errors)),t.xp6(6),t.Q6J("formControl",s.otrosNombresControl),t.xp6(1),t.Q6J("ngForOf",t.lcZ(35,41,s.otrosNombresControl.errors)),t.xp6(7),t.Q6J("formControl",s.nacionalidadControl),t.xp6(1),t.Q6J("ngForOf",s.nacionalidades),t.xp6(1),t.Q6J("ngForOf",t.lcZ(44,43,s.nacionalidadControl.errors)),t.xp6(6),t.Q6J("formControl",s.documentosControl),t.xp6(1),t.Q6J("ngForOf",s.tipoDocumentos),t.xp6(1),t.Q6J("ngForOf",t.lcZ(52,45,s.documentosControl.errors)),t.xp6(6),t.Q6J("formControl",s.emisorControl),t.xp6(1),t.Q6J("ngForOf",s.emisorDocumentos),t.xp6(1),t.Q6J("ngForOf",t.lcZ(60,47,s.emisorControl.errors)),t.xp6(6),t.Q6J("formControl",s.numeroDocumentoControl),t.xp6(1),t.Q6J("ngForOf",t.lcZ(67,49,s.numeroDocumentoControl.errors)),t.xp6(2),t.Q6J("ngIf","solicitud"==s.modal.tipoDialogo),t.xp6(3),t.Q6J("ngClass",t.VKq(57,l,s.fechaNacimientoControl.invalid)),t.xp6(3),t.Q6J("matDatepicker",m)("formControl",s.fechaNacimientoControl),t.xp6(1),t.Q6J("for",m),t.xp6(3),t.Q6J("ngForOf",t.lcZ(79,51,s.fechaNacimientoControl.errors)),t.xp6(2),t.Q6J("ngIf",s.fechaNacimientoControl.hasError("edadMinima")),t.xp6(5),t.Q6J("formControl",s.sexoControl),t.xp6(1),t.Q6J("ngForOf",s.sexo),t.xp6(1),t.Q6J("ngForOf",t.lcZ(88,53,s.sexoControl.errors)),t.xp6(6),t.Q6J("formControl",s.domicilioControl),t.xp6(2),t.Q6J("ngForOf",t.lcZ(96,55,s.domicilioControl.errors)),t.xp6(7),t.Q6J("ngIf","solicitud"!=s.modal.tipoDialogo),t.xp6(1),t.Q6J("ngIf","solicitud"==s.modal.tipoDialogo)}},dependencies:[b.mk,b.sg,b.O5,d.lW,N.TO,N.KE,N.hX,N.R9,y.Nt,O.gD,Y.ey,z.Mq,z.hl,z.nW,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.oH,o.sg,b.Nd,F.K]}),i})()},9246:(M,A,a)=>{a.d(A,{E:()=>nt});var o=a(4650),p=a(8739),g=a(6308),t=a(7155),d=a(1209),C=a(1754),_=a(9299),U=a(5412),T=a(6895),I=a(4859),x=a(9549),f=a(7392),Z=a(4144),v=a(8425);const L=["autorizante"];function b(n,c){if(1&n){const l=o.EpF();o.TgZ(0,"button",26),o.NdJ("click",function(){o.CHM(l);const i=o.oxw();return o.KtG(i.nuevaPersona())}),o._uU(1," Crear Autorizante "),o.qZA()}}function N(n,c){if(1&n){const l=o.EpF();o.TgZ(0,"button",27),o.NdJ("click",function(){o.CHM(l);const i=o.oxw();return o.KtG(i.reload())}),o.TgZ(1,"mat-icon"),o._uU(2," refresh "),o.qZA()()}}function y(n,c){1&n&&(o.TgZ(0,"th",28),o._uU(1," Apellido/s "),o.qZA())}function O(n,c){if(1&n&&(o.TgZ(0,"td",29),o._uU(1),o.qZA()),2&n){const l=c.$implicit;o.xp6(1),o.AsE(" ",l.apellido," ",l.segundo_apellido,"")}}function Y(n,c){1&n&&(o.TgZ(0,"th",30),o._uU(1," Nombre/s "),o.qZA())}function z(n,c){if(1&n&&(o.TgZ(0,"td",29),o._uU(1),o.qZA()),2&n){const l=c.$implicit;o.xp6(1),o.AsE(" ",l.nombre," ",l.otros_nombres," ")}}function F(n,c){1&n&&(o.TgZ(0,"th",30),o._uU(1," Nacionalidad "),o.qZA())}function Q(n,c){if(1&n&&(o.TgZ(0,"td",29),o._uU(1),o.qZA()),2&n){const l=c.$implicit;o.xp6(1),o.hij(" ",l.nacionalidad," ")}}function J(n,c){1&n&&(o.TgZ(0,"th",30),o._uU(1," T.Documento "),o.qZA())}function S(n,c){if(1&n&&(o.TgZ(0,"td",29),o._uU(1),o.qZA()),2&n){const l=c.$implicit;o.xp6(1),o.hij(" ",l.tipo_documento," ")}}function q(n,c){1&n&&(o.TgZ(0,"th",30),o._uU(1," E.Documento "),o.qZA())}function k(n,c){if(1&n&&(o.TgZ(0,"td",29),o._uU(1),o.qZA()),2&n){const l=c.$implicit;o.xp6(1),o.hij(" ",l.emisor_documento," ")}}function P(n,c){1&n&&(o.TgZ(0,"th",30),o._uU(1,"Nro. Documento "),o.qZA())}function R(n,c){if(1&n&&(o.TgZ(0,"td",29),o._uU(1),o.qZA()),2&n){const l=c.$implicit;o.xp6(1),o.hij(" ",l.numero_de_documento," ")}}function $(n,c){1&n&&(o.TgZ(0,"th",30),o._uU(1,"Fecha de Nacimiento "),o.qZA())}function B(n,c){if(1&n&&(o.TgZ(0,"td",29),o._uU(1),o.ALo(2,"date"),o.qZA()),2&n){const l=c.$implicit;o.xp6(1),o.hij(" ",o.xi3(2,1,l.fecha_de_nacimiento,"dd-MM-yyyy")," ")}}function j(n,c){1&n&&(o.TgZ(0,"th",30),o._uU(1,"Sexo"),o.qZA())}function w(n,c){if(1&n&&(o.TgZ(0,"td",29),o._uU(1),o.qZA()),2&n){const l=c.$implicit;o.xp6(1),o.hij(" ",l.sexo," ")}}function K(n,c){1&n&&(o.TgZ(0,"th",30),o._uU(1,"Domicilio"),o.qZA())}function W(n,c){if(1&n&&(o.TgZ(0,"td",29),o._uU(1),o.qZA()),2&n){const l=c.$implicit;o.xp6(1),o.hij(" ",l.domicilio," ")}}function V(n,c){1&n&&(o.TgZ(0,"th",30),o._uU(1," Acciones "),o.qZA())}function G(n,c){if(1&n){const l=o.EpF();o.TgZ(0,"button",34),o.NdJ("click",function(){o.CHM(l);const i=o.oxw().$implicit,r=o.oxw();return o.KtG(r.seleccionarAutorizante(i))}),o._uU(1," Editar! "),o.qZA()}}function H(n,c){if(1&n){const l=o.EpF();o.TgZ(0,"button",35),o.NdJ("click",function(){o.CHM(l);const i=o.oxw().$implicit,r=o.oxw();return o.KtG(r.asignarAutorizante(i))}),o._uU(1," Seleccionar "),o.qZA()}}function X(n,c){1&n&&(o.TgZ(0,"button",36)(1,"small"),o._uU(2,"faltan datos"),o.qZA(),o.TgZ(3,"mat-icon"),o._uU(4,"warning"),o.qZA()())}function tt(n,c){if(1&n&&(o.TgZ(0,"td",29),o.YNc(1,G,2,0,"button",31),o.YNc(2,H,2,0,"button",32),o.YNc(3,X,5,0,"button",33),o.qZA()),2&n){const l=c.$implicit,u=o.oxw();o.xp6(1),o.Q6J("ngIf",!u.precarga),o.xp6(1),o.Q6J("ngIf",u.precarga),o.xp6(1),o.Q6J("ngIf",!l.nationality_id)}}function ot(n,c){1&n&&o._UZ(0,"tr",37)}function et(n,c){1&n&&o._UZ(0,"tr",38)}const it=function(){return[5,10,20]};let nt=(()=>{class n{constructor(l,u,i,r){this.personasService=l,this.matPaginatorIntl=u,this.activatedRoute=i,this.dialog=r,this.titulo="Listado de Autorizantes",this.paginatorItems="Autorizantes por p\xe1gina",this.rutaActual="",this.precarga=!1,this.displayedColumns=["apellido","nombre","numero_de_documento","acciones"],this.personas=[],this.botones=!1,this.botonSeleccionar=!1,this.onSeleccionarAutorizante=new o.vpe,this.matPaginatorIntl.itemsPerPageLabel=this.paginatorItems}ngOnInit(){this.activatedRoute.url.subscribe(l=>{this.rutaActual=l.map(u=>u.path).join("/"),("nueva"==this.rutaActual||this.rutaActual.includes("solicitudes"))&&(this.precarga=!0)}),this.cargarMenores()}applyFilter(l){this.dataSource.filter=l.target.value.trim().toLowerCase()}cargarMenores(){this.personasService.getPersonasJoin().subscribe(l=>{this.personas=l.filter(u=>1!==u.id),this.dataSource=new t.by(this.personas),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}asignarAutorizante(l){this.onSeleccionarAutorizante.emit(l)}nuevaPersona(){this.dialog.open(d.U,{width:"70vw",disableClose:!0,data:{modal:{tipoDialogo:"autorizante",accionModal:"agregar"}}}).afterClosed().subscribe(()=>{this.cargarMenores()})}seleccionarAutorizante(l){this.dialog.open(d.U,{width:"70vw",disableClose:!0,data:{persona:l,modal:{tipoDialogo:"autorizante",accionModal:"editar"}}}).afterClosed().subscribe(i=>{this.cargarMenores()})}reload(){this.cargarMenores()}}return n.\u0275fac=function(l){return new(l||n)(o.Y36(C.F),o.Y36(p.ye),o.Y36(_.gz),o.Y36(U.uw))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-lista-autorizante"]],viewQuery:function(l,u){if(1&l&&(o.Gf(L,5),o.Gf(p.NW,7),o.Gf(g.YE,7)),2&l){let i;o.iGM(i=o.CRH())&&(u.autorizante=i.first),o.iGM(i=o.CRH())&&(u.paginator=i.first),o.iGM(i=o.CRH())&&(u.sort=i.first)}},outputs:{onSeleccionarAutorizante:"onSeleccionarAutorizante"},decls:48,vars:8,consts:[[1,"mt-2"],[1,"row"],[1,"col-md-10"],["appearance","standard",1,"w-100"],["matInput","","placeholder","Filtro",3,"keyup"],["input",""],[1,"col"],["mat-flat-button","","class","mt-3 float-end amarillo",3,"click",4,"ngIf"],["mat-flat-button","","class","float-end amarillo",3,"click",4,"ngIf"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","apellido"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","nacionalidad"],["matColumnDef","tipo_documento"],["matColumnDef","emisor_documento"],["matColumnDef","numero_de_documento"],["matColumnDef","fecha_de_nacimiento"],["matColumnDef","sexo"],["matColumnDef","domicilio"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-flat-button","",1,"mt-3","float-end","amarillo",3,"click"],["mat-flat-button","",1,"float-end","amarillo",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-flat-button","","color","accent",3,"click",4,"ngIf"],["class","ms-3 float-left","mat-flat-button","","matStepperNext","","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","color","disable","class","text-end",4,"ngIf"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","matStepperNext","","color","accent",1,"ms-3","float-left",3,"click"],["mat-flat-button","","color","disable",1,"text-end"],["mat-header-row",""],["mat-row",""]],template:function(l,u){1&l&&(o.TgZ(0,"div",0)(1,"h1"),o._uU(2),o.qZA(),o._UZ(3,"hr"),o.TgZ(4,"div",1)(5,"div",2)(6,"mat-form-field",3)(7,"mat-label"),o._uU(8,"Filtro"),o.qZA(),o.TgZ(9,"input",4,5),o.NdJ("keyup",function(r){return u.applyFilter(r)}),o.qZA()()(),o.TgZ(11,"div",6),o.YNc(12,b,2,0,"button",7),o.YNc(13,N,3,0,"button",8),o.qZA()(),o.TgZ(14,"table",9),o.ynx(15,10),o.YNc(16,y,2,0,"th",11),o.YNc(17,O,2,2,"td",12),o.BQk(),o.ynx(18,13),o.YNc(19,Y,2,0,"th",14),o.YNc(20,z,2,2,"td",12),o.BQk(),o.ynx(21,15),o.YNc(22,F,2,0,"th",14),o.YNc(23,Q,2,1,"td",12),o.BQk(),o.ynx(24,16),o.YNc(25,J,2,0,"th",14),o.YNc(26,S,2,1,"td",12),o.BQk(),o.ynx(27,17),o.YNc(28,q,2,0,"th",14),o.YNc(29,k,2,1,"td",12),o.BQk(),o.ynx(30,18),o.YNc(31,P,2,0,"th",14),o.YNc(32,R,2,1,"td",12),o.BQk(),o.ynx(33,19),o.YNc(34,$,2,0,"th",14),o.YNc(35,B,3,4,"td",12),o.BQk(),o.ynx(36,20),o.YNc(37,j,2,0,"th",14),o.YNc(38,w,2,1,"td",12),o.BQk(),o.ynx(39,21),o.YNc(40,K,2,0,"th",14),o.YNc(41,W,2,1,"td",12),o.BQk(),o.ynx(42,22),o.YNc(43,V,2,0,"th",14),o.YNc(44,tt,4,3,"td",12),o.BQk(),o.YNc(45,ot,1,0,"tr",23),o.YNc(46,et,1,0,"tr",24),o.qZA(),o._UZ(47,"mat-paginator",25),o.qZA()),2&l&&(o.xp6(2),o.Oqu(u.titulo),o.xp6(10),o.Q6J("ngIf",!u.precarga),o.xp6(1),o.Q6J("ngIf",u.precarga),o.xp6(1),o.Q6J("dataSource",u.dataSource),o.xp6(31),o.Q6J("matHeaderRowDef",u.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",u.displayedColumns),o.xp6(1),o.Q6J("pageSizeOptions",o.DdM(7,it)))},dependencies:[T.O5,I.lW,x.KE,x.hX,f.Hw,Z.Nt,p.NW,g.YE,g.nU,t.BZ,t.fO,t.as,t.w1,t.Dz,t.nj,t.ge,t.ev,t.XQ,t.Gk,v.Ic,T.uU],styles:["table[_ngcontent-%COMP%], mat-paginator[_ngcontent-%COMP%]{width:100%}.amarillo[_ngcontent-%COMP%]{background-color:#ff0;color:#212529}"]}),n})()},5291:(M,A,a)=>{a.d(A,{j:()=>t});var o=a(2340),p=a(4650),g=a(529);let t=(()=>{class d{constructor(_){this.http=_,this.baseUrl=o.N.baseUrl}getAcreditarVinculos(){return this.http.get(`${this.baseUrl}/acreditaciones`)}getAcreditarVinculoId(_){return this.http.get(`${this.baseUrl}/acreditacion/${_}`)}}return d.\u0275fac=function(_){return new(_||d)(p.LFG(g.eN))},d.\u0275prov=p.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},5201:(M,A,a)=>{a.d(A,{j:()=>t});var o=a(2340),p=a(4650),g=a(529);let t=(()=>{class d{constructor(_){this.http=_,this.baseUrl=o.N.baseUrl}getCaracterAutorizantes(){return this.http.get(`${this.baseUrl}/autorizaciones`)}getCaracterAutorizanteId(_){return this.http.get(`${this.baseUrl}/autorizacion/${_}`)}}return d.\u0275fac=function(_){return new(_||d)(p.LFG(g.eN))},d.\u0275prov=p.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);