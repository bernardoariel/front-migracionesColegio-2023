<h1 class="mt-2">{{titulo}}</h1>
<hr>

<form [formGroup]="personaForm" autocomplete="off">
  <!-- fila 1  Nombre y Apellido-->
  <div class="row mt-3 mb-3">
    <!-- nombre -->
    <div class="col-md-3">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Apellido</mat-label>
        <input
          type="text"
          matInput
          [formControl]="apellidoControl"
          placeholder="Ingrese el Apellido"
          #apellidoInput

        >
        <mat-error *ngFor="let error of apellidoControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
      </mat-form-field>



    </div>

    <div class="col-md-3">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Segundo Apellido</mat-label>
        <input
          type="text"
          [formControl]="segundoApellidoControl"
          matInput
          placeholder="Ingrese el Segundo Apellido"
        >
        <mat-error *ngFor="let error of segundoApellidoControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
      </mat-form-field>

    </div>

    <div class="col-md-3">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Nombre</mat-label>
        <input
          type="text"
          [formControl]="nombreControl"
          matInput
          required
          placeholder="Ingrese el Nombre"
        >
        <mat-error *ngFor="let error of nombreControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
      </mat-form-field>

    </div>

    <div class="col-md-3">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Otros Nombres</mat-label>
        <input
          type="text"
          id="otros_nombres"
          [formControl]="otrosNombresControl"
          matInput
          placeholder="Ingrese Otros Nombres"
        >
        <mat-error *ngFor="let error of otrosNombresControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
      </mat-form-field>

    </div>

  </div>
  <!-- fila 2  email y matricula-->
  <div class="row mt-3 mb-3 ">
    <!-- email -->
    <div class="col-md-3">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Nacionalidad</mat-label>
        <mat-select [formControl]="nacionalidadControl">
          <mat-option *ngFor="let nacionalidad of nacionalidades"
            [value]="nacionalidad.id"
          >
          {{ nacionalidad.nombre}}
          </mat-option>
        </mat-select>
        <mat-error *ngFor="let error of nacionalidadControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
      </mat-form-field>
    </div>
    <!-- tipo_documento -->
    <div class="col-md-3">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Tipo de Documento</mat-label>
        <mat-select [formControl]="documentosControl">
          <mat-option *ngFor="let tipoDocumento of tipoDocumentos"
            [value]="tipoDocumento.id"
          >
          {{ tipoDocumento.descripcion}}
          </mat-option>
        </mat-select>
        <mat-error *ngFor="let error of documentosControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
      </mat-form-field>

    </div>
    <!-- emisor_documento -->
    <div class="col-md-3">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Emisor de Documento</mat-label>
        <mat-select [formControl]="emisorControl">
          <mat-option *ngFor="let emisorDocumento of emisorDocumentos"
            [value]="emisorDocumento.id"
          >
          {{ emisorDocumento.descripcion }}
          </mat-option>
        </mat-select>
        <mat-error *ngFor="let error of emisorControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
      </mat-form-field>

    </div>
    <!-- emisor_documento -->
    <div class="col-md-3">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Numero de Documento</mat-label>
        <input
        matNumberInput
        matInput
        (blur)="buscarPersonaExistente()"
        (keydown)="validarNumero($event)"
        [formControl]="numeroDocumentoControl"
        >
        <mat-error *ngFor="let error of numeroDocumentoControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
      </mat-form-field>

    </div>

  </div>

  <div class="row mt-3 mb-3">
    <!-- email -->
    <div class="col-md-4">

      <!-- <mat-form-field appearance="fill" class="w-100">
        <mat-label>Fecha de Nacimiento</mat-label>
        <input matInput [matDatepicker]="dp" [formControl]="fechaNacimientoControl"  (dateInput)="addEvent('input', $event)" (dateChange)="addEvent('change', $event)" readonly>
        <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>

        <mat-datepicker #dp></mat-datepicker>
        <mat-hint>dd/mm/yyyy</mat-hint>
      </mat-form-field> -->
      <mat-form-field appearance="fill" class="w-100" [ngClass]="{'mat-form-field-invalid': fechaNacimientoControl.invalid}">
        <mat-label>Fecha de Nacimiento</mat-label>
        <input matInput [matDatepicker]="dp" [formControl]="fechaNacimientoControl"
        readonly>
        <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>

        <mat-datepicker #dp></mat-datepicker>

        <mat-error *ngFor="let error of fechaNacimientoControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
        <mat-error *ngIf="fechaNacimientoControl.hasError('edadMinima')"></mat-error>
      </mat-form-field>

    </div>
    <!-- tipo_documento -->
    <div class="col-md-3">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Sexo</mat-label>
        <mat-select [formControl]="sexoControl">
          <mat-option *ngFor="let itemSexo of sexo"
            [value]="itemSexo.id"

          >
          {{ itemSexo.descripcion}}
          </mat-option>
        </mat-select>

        <mat-error *ngFor="let error of sexoControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
      </mat-form-field>

    </div>
    <!-- emisor_documento -->
    <div class="col-md-6">

      <mat-form-field class="text-area-width" appearance="fill" class="w-100">
        <mat-label>Domicilio</mat-label>

        <textarea matInput
                  cols="50" rows="1" placeholder=""
                  placeholder="Ingrese el domicilio"
                  [formControl]="domicilioControl"
                  required>
        </textarea>
        <mat-error *ngFor="let error of domicilioControl.errors | keyvalue">
          {{ error | controlErrorMessages:'texto' }}
        </mat-error>
      </mat-form-field>

    </div>


  </div>

  <!-- boton enviar -->
  <div  class="row mt-5 ">

    <div class="col">
      <button
        class="float-start"
        mat-flat-button
        color="secondary"
        [routerLink]="['/menores','listado']"
      >
        Cancelar
      </button>
    </div>
    <div class="col">
      <button
        class="float-end"
        mat-flat-button
        [disabled]="personaForm.invalid"
        color="primary"
        (click)="guardar()">
        Guardar
      </button>
    </div>


  </div>
</form>

<!-- <ng-container *ngFor="let control of menorForm.controls | keyvalue">

  <pre class="text-white">{{ control.key }} : {{ menorForm.get(control.key)?.errors | json }}</pre>
</ng-container>

 -->
