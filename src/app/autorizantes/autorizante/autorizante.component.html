<!-- Cabecera -->
<h1>
  {{(autorizante.id)? 'Editando ': 'Nuevo Autorizante:'}}  {{ autorizante.apellido}} {{ autorizante.nombre }}
</h1>
<!-- divisor -->
<mat-divider class="pb-2 pt-2"></mat-divider>

<ng-container *ngIf="!precarga;else elseTemplate">
  <!-- Form -->
  <div class="containter" id="form">

    <!-- fila 1  Nombre y Apellido-->
    <div class="row">
      <!-- nombre -->
      <div class="col-md-3">

        <mat-form-field>
          <mat-label>Apellido</mat-label>
          <input
            type="text"
            id="apellido"
            [(ngModel)]="autorizante.apellido"
            matInput
            required
          >
        </mat-form-field>

      </div>

      <div class="col-md-3">

        <mat-form-field>
          <mat-label>Segundo Apellido</mat-label>
          <input
            type="text"
            id="segundo_apellido"
            [(ngModel)]="autorizante.segundo_apellido"
            matInput
            required
          >
        </mat-form-field>

      </div>

      <div class="col-md-3">

        <mat-form-field>
          <mat-label>Nombre</mat-label>
          <input
            type="text"
            id="nombre"
            [(ngModel)]="autorizante.nombre"
            matInput
            required
          >
        </mat-form-field>

      </div>

      <div class="col-md-3">

        <mat-form-field>
          <mat-label>Otros Nombres</mat-label>
          <input
            type="text"
            id="otros_nombres"
            [(ngModel)]="autorizante.otros_nombres"
            matInput
            required
          >
        </mat-form-field>

      </div>

    </div>
    <!-- fila 2  Nacionalidad TipoDocumento EmisorDocumento NumeroDoc-->
    <div class="row">
      <!-- Nacionalidad -->
      <div class="col-md-3">

        <mat-form-field>
          <mat-label>Nacionalidad</mat-label>
          <mat-select [(ngModel)]="autorizante.nationality_id">
            <mat-option *ngFor="let nacionalidad of nacionalidades"
              [value]="nacionalidad.id"
            >
            {{ nacionalidad.nombre}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <!-- tipo_documento -->
      <div class="col-md-3">

        <mat-form-field >
          <mat-label>Tipo de Documento</mat-label>
          <mat-select [(ngModel)]="autorizante.type_document_id">
            <mat-option *ngFor="let tipoDocumento of tipoDocumentos"
              [value]="tipoDocumento.id"

            >
            {{ tipoDocumento.descripcion}}
            </mat-option>
          </mat-select>

        </mat-form-field>

      </div>
      <!-- emisor_documento -->
      <div class="col-md-3">

        <mat-form-field >
          <mat-label>Emisor de Documento</mat-label>
          <mat-select [(ngModel)]="autorizante.issuer_document_id">
            <mat-option *ngFor="let emisorDocumento of emisorDocumentos"
              [value]="emisorDocumento.id"
            >
            {{ emisorDocumento.descripcion}}
            </mat-option>
          </mat-select>

        </mat-form-field>

      </div>
      <!-- numero documento -->
      <div class="col-md-3">

        <mat-form-field >
          <mat-label>Numero de Documento</mat-label>
          <input
            type="text"
            id="numero_de_documento"
            [(ngModel)]="autorizante.numero_de_documento"
            matInput
            required
          >
        </mat-form-field>

      </div>

    </div>
    <!-- fila 3  Fecha de Nacimiento Sexo Domicilio-->
    <div class="row">
      <!-- fecha de nacimiento -->
      <div class="col-md-3">
        <mat-form-field>
          <mat-label>Fecha de Nacimiento</mat-label>
          <input matInput [matDatepicker]="dp" [(ngModel)]="autorizante.fecha_de_nacimiento" readonly>
          <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
          <mat-datepicker #dp></mat-datepicker>
        </mat-form-field>
      </div>
      <!-- Sexo -->
      <div class="col-md-3">

        <mat-form-field >
          <mat-label>Sexo</mat-label>
          <mat-select [(ngModel)]="autorizante.sex_id">
            <mat-option *ngFor="let itemSexo of sexo"
              [value]="itemSexo.id"

            >
            {{ itemSexo.descripcion}}
            </mat-option>
          </mat-select>

        </mat-form-field>

      </div>
      <!-- Domicilio -->
      <div class="col-md-6">

        <mat-form-field class="text-area-width">
          <mat-label>Domicilio</mat-label>

          <textarea matInput
                    cols="50" rows="1" placeholder=""
                    [(ngModel)]="autorizante.domicilio"
                    required>
          </textarea>
        </mat-form-field>

      </div>

    </div>
    <!-- fila 2  Nacionalidad TipoDocumento EmisorDocumento NumeroDoc-->
    <div class="row">
      <!-- Caracter Autorizante -->
      <div class="col-md-3">

        <mat-form-field>
          <mat-label>Caracter Autorizante</mat-label>
          <mat-select [(ngModel)]="autorizante.authorizing_relatives_id">
            <mat-option *ngFor="let caracterAutorizante of caracterAutorizantes"
              [value]="caracterAutorizante.id"

            >
            {{ caracterAutorizante.descripcion}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <!-- Acreditar Vinculo -->
      <div class="col-md-3">

        <mat-form-field >
          <mat-label>Acreditar Vinculo </mat-label>
          <mat-select [(ngModel)]="autorizante.accreditation_links_id">
            <mat-option *ngFor="let acreditacionVinculo of acreditacionVinculos"
              [value]="acreditacionVinculo.id"
            >
            {{ acreditacionVinculo.descripcion}}
            </mat-option>
          </mat-select>

        </mat-form-field>

      </div>
      <!-- Telefono -->
      <div class="col-md-3">

        <mat-form-field >
          <mat-label>Telefono</mat-label>
          <input
          type="text"
          id="telefono"
          [(ngModel)]="autorizante.telefono"
          matInput
          required
        >
        </mat-form-field>

      </div>
      <!-- numero documento -->
      <div class="col-md-3">

        <mat-form-field >
          <mat-label>Requiere Autorizacion</mat-label>
          <!-- <input
            type="text"
            id="numero_de_documento"
            [(ngModel)]="autorizante.requiere_aut_adicional_de"
            matInput
            required
          > -->
          <mat-select [(ngModel)]="autorizante.requiere_aut_adicional_de">

            <mat-option  value="t"> SI </mat-option>
            <mat-option  value="f"> NO </mat-option>

          </mat-select>
        </mat-form-field>

      </div>

    </div>
    <!-- fila 3 -->


    <!-- boton enviar -->
    <div class="row mt-5 ">
      <div class="col-md-4">
        <button
          class="float-start"
          mat-raised-button
          color="secondary"
          (click)="cancelar()">Cancelar</button>

          <div *ngIf="autorizante.id;">
            <button
              mat-raised-button
              color="warn"
              (click)="eliminarAutorizante(autorizante.id)">Eliminar</button>
          </div>


      </div>


      <div class="col-md-4">
        <button
          class="float-end"
          mat-raised-button
          color="primary"
          (click)="guardar()">Guardar</button>
      </div>

    </div>

  </div>
  <!-- cierra el div form -->
</ng-container>

<ng-template #elseTemplate>
  <!-- Form -->
  <div class="containter" id="form">

    <!-- fila 1  Apellido y Segundo Apellido-->
    <div class="row">

      <!-- apellido -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Apellido</mat-label>

          <input
            type="text"
            id="apellido"
            [(ngModel)]="autorizante.apellido"
            matInput
            required
          >

        </mat-form-field>

      </div>

      <!-- segundo apellido -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Segundo Apellido</mat-label>

          <input
            type="text"
            id="segundo_apellido"
            [(ngModel)]="autorizante.segundo_apellido"
            matInput
          >

        </mat-form-field>

      </div>

    </div>
    <!-- fila 2  Nombre y Otro Nombre-->
    <div class="row">

      <!-- nombre -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Nombre</mat-label>

          <input
            type="text"
            id="nombre"
            [(ngModel)]="autorizante.nombre"
            matInput
            required
          >

        </mat-form-field>

      </div>

      <!-- otros nombres -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Otros Nombres</mat-label>

          <input
            type="text"
            id="otros_nombres"
            [(ngModel)]="autorizante.otros_nombres"
            matInput
          >

        </mat-form-field>

      </div>

    </div>

    <!-- fila 3 Nacionalidad y tipo de documento -->
    <div class="row">

      <!-- Nacionalidad -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Nacionalidad</mat-label>

          <mat-select [(ngModel)]="autorizante.nationality_id">

            <mat-option *ngFor="let nacionalidad of nacionalidades"
              [value]="nacionalidad.id"
            >

            {{ nacionalidad.nombre}}

            </mat-option>

          </mat-select>

        </mat-form-field>

      </div>
      <!-- tipo_documento -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Tipo de Documento</mat-label>

          <mat-select [(ngModel)]="autorizante.type_document_id">

            <mat-option *ngFor="let tipoDocumento of tipoDocumentos"
              [value]="tipoDocumento.id"
            >

            {{ tipoDocumento.descripcion}}

            </mat-option>

          </mat-select>

        </mat-form-field>

      </div>

    </div>

    <!-- fila 4 emisor de documento y numero de documento -->
    <div class="row">
      <!-- emisor_documento -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Emisor de Documento</mat-label>

          <mat-select [(ngModel)]="autorizante.issuer_document_id">

            <mat-option *ngFor="let emisorDocumento of emisorDocumentos"
              [value]="emisorDocumento.id"
            >

            {{ emisorDocumento.descripcion}}

            </mat-option>

          </mat-select>

        </mat-form-field>

      </div>

      <!-- numero documento -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Numero de Documento</mat-label>

          <input
            type="text"
            id="numero_de_documento"
            [(ngModel)]="autorizante.numero_de_documento"
            matInput
            required
          >

        </mat-form-field>

      </div>

    </div>

    <!-- fila 5  Fecha de Nacimiento Sexo -->
    <div class="row">

      <!-- fecha de nacimiento -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Fecha de Nacimiento</mat-label>

          <input matInput [matDatepicker]="dp" [(ngModel)]="autorizante.fecha_de_nacimiento" readonly>

          <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>

          <mat-datepicker #dp></mat-datepicker>

        </mat-form-field>

      </div>

      <!-- Sexo -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Sexo</mat-label>

          <mat-select [(ngModel)]="autorizante.sex_id">

            <mat-option *ngFor="let itemSexo of sexo"
              [value]="itemSexo.id"
            >

            {{ itemSexo.descripcion}}

            </mat-option>

          </mat-select>

        </mat-form-field>

      </div>

    </div>

     <!-- fila 6  Domicilio -->
    <div class="row">

      <!-- Domicilio -->
      <div class="col-md-12">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Domicilio</mat-label>

          <textarea matInput
                    cols="50" rows="1" placeholder=""
                    [(ngModel)]="autorizante.domicilio"
                    required>
          </textarea>

        </mat-form-field>

      </div>

    </div>

    <!-- fila 7  Autorizante Vinculo -->
    <div class="row">
      <!-- Caracter Autorizante -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Caracter Autorizante</mat-label>

          <mat-select [(ngModel)]="autorizante.authorizing_relatives_id">

            <mat-option *ngFor="let caracterAutorizante of caracterAutorizantes"
              [value]="caracterAutorizante.id"
            >

            {{ caracterAutorizante.descripcion}}

            </mat-option>

          </mat-select>

        </mat-form-field>

      </div>

      <!-- Acreditar Vinculo -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Acreditar Vinculo </mat-label>

          <mat-select [(ngModel)]="autorizante.accreditation_links_id">

            <mat-option *ngFor="let acreditacionVinculo of acreditacionVinculos"
              [value]="acreditacionVinculo.id"
            >

            {{ acreditacionVinculo.descripcion}}

            </mat-option>

          </mat-select>

        </mat-form-field>

      </div>

    </div>

    <!-- fila 8  Telfono Requiere autorizacion -->
    <div class="row">

      <!-- Telefono -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Telefono</mat-label>

          <input
            type="text"
            id="telefono"
            [(ngModel)]="autorizante.telefono"
            matInput
          >

        </mat-form-field>

      </div>

      <!-- Requiere autorizacion -->
      <div class="col-md-6">

        <mat-form-field appearance="fill" class="w-100">

          <mat-label>Requiere Autorizacion</mat-label>

         <!--  <input
            type="text"
            id="numero_de_documento"
            [(ngModel)]="autorizante.requiere_aut_adicional_de"
            matInput
            required
          > -->
          <mat-select [(ngModel)]="autorizante.requiere_aut_adicional_de">

            <mat-option  value="t"> SI </mat-option>
            <mat-option  value="f"> NO </mat-option>

          </mat-select>

        </mat-form-field>

      </div>

    </div>
    <!-- fila 9 botones -->
    <div class="row">

      <div class="col-md-8"></div>
      <!-- botones -->
      <div class="col-md-4">
        <button class="float-end w-100" mat-raised-button color="primary" (click)="guardar()">
          Guardar
        </button>
      </div>

    </div>

  </div>
  <!-- cierra el div form -->
</ng-template>

